<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta-name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- PDF.js for reading PDF resumes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.12.313/pdf.min.js"></script>

</head>

<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

    <header class="w-full max-w-3xl bg-white p-4 rounded-lg shadow mb-6 flex justify-between">
        <h2 class="text-xl font-bold text-blue-600">Resume Analyzer</h2>
        <a href="dashboard.html" class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-800">Dashboard</a>
    </header>

    <!-- Upload -->
    <div class="w-full max-w-3xl bg-white p-6 rounded-lg shadow mb-6 text-center">
        <h3 class="text-lg font-semibold">Upload Resume (PDF)</h3>
        <input type="file" id="resumeFile" accept="application/pdf" class="mt-3 border p-2 rounded">
        <button onclick="analyzeResume()" class="mt-4 bg-blue-600 text-white px-5 py-3 rounded hover:bg-blue-700">
            Analyze Resume
        </button>
    </div>

    <!-- Results -->
    <div id="results" class="w-full max-w-3xl hidden">

        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
            <!-- ATS Score -->
            <div class="bg-white p-6 rounded-lg shadow text-center">
                <h2 class="text-xl font-semibold mb-2">ATS Score</h2>
                <p id="atsScore" class="text-4xl font-bold text-blue-600 mt-4">0%</p>
            </div>

            <!-- Skill List -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-xl font-semibold mb-2">Skills Found</h2>
                <ul id="skillsList" class="list-disc pl-6 mt-4 text-gray-800"></ul>
            </div>
        </div>

    </div>

    <script>
        // Predefined skills list
        const allSkills = [
            "python", "django", "html", "css", "javascript", "sql",
            "react", "node", "java", "c", "c++", "mysql", "mongodb"
        ];

        // Extract text from PDF
        async function extractTextFromPDF(file) {
            const pdf = await pdfjsLib.getDocument(URL.createObjectURL(file)).promise;
            let text = "";

            for (let i = 1; i <= pdf.numPages; i++) {
                const page = await pdf.getPage(i);
                const content = await page.getTextContent();
                text += content.items.map(item => item.str).join(" ");
            }
            return text.toLowerCase();
        }

        // Analyze resume
        async function analyzeResume() {
            const file = document.getElementById("resumeFile").files[0];
            if (!file) return alert("Please upload a PDF resume!");

            const text = await extractTextFromPDF(file);

            // Skill detection
            const foundSkills = allSkills.filter(skill => text.includes(skill));

            // Show results
            document.getElementById("results").classList.remove("hidden");

            // Populate skills
            const list = document.getElementById("skillsList");
            list.innerHTML = "";
            foundSkills.forEach(skill => {
                list.innerHTML += `<li>${skill.toUpperCase()}</li>`;
            });

            // ATS Score = % of matched skills
            const score = Math.round((foundSkills.length / allSkills.length) * 100);
            document.getElementById("atsScore").innerText = score + "%";
        }
    </script>

</body>
</html>
