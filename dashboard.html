<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

<div id="dashboardContainer" class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md text-center hidden space-y-6">
    <!-- Welcome Message -->
    <h1 id="welcomeMessage" class="text-2xl font-bold"></h1>
    <p class="text-gray-600">Upload a new resume to analyze</p>

    <!-- Buttons -->
    <button onclick="goUpload()" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">
        Upload Resume
    </button>

    <button onclick="goProfile()" class="w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700">
        View Profile
    </button>

    <button onclick="goReports()" class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700">
        View Past Reports
    </button>

    <button onclick="logout()" class="w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600">
        Logout
    </button>
</div>

<script>
window.onload = () => {
    // Get logged-in user
    const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser") || "{}");
    const usernameFallback = localStorage.getItem("username");
    const displayName = loggedInUser.name || usernameFallback;

    if(!displayName){
        // No user logged in â†’ redirect to login
        window.location.href = "login.html";
        return;
    }

    // Show dashboard
    const dashboardContainer = document.getElementById("dashboardContainer");
    dashboardContainer.classList.remove("hidden");

    // Display greeting
    const welcomeMessage = document.getElementById("welcomeMessage");
    const hours = new Date().getHours();
    let greeting = "Good Morning";
    if(hours >= 12 && hours < 16) greeting = "Good Afternoon";
    else if(hours >= 16) greeting = "Good Evening";

    welcomeMessage.textContent = `Welcome ${displayName}, ${greeting}!`;
};

// Navigation functions
function goUpload(){
    // Clear any previous resume content to enforce a new upload
    localStorage.removeItem("resumeContent");
    localStorage.removeItem("uploadedFileName");
    window.location.href = "upload.html";
}

function goProfile(){
    window.location.href = "profile.html";
}

function goReports(){
    window.location.href = "reports.html";
}

function logout(){
    localStorage.removeItem("loggedInUser");
    localStorage.removeItem("username");
    localStorage.removeItem("resumeContent");
    localStorage.removeItem("uploadedFileName");
    window.location.href = "login.html";
}
</script>

</body>
</html>
